{"ast":null,"code":"import { getAuth, signInWithPopup, GoogleAuthProvider, GithubAuthProvider, signInWithEmailAndPassword, createUserWithEmailAndPassword, updateProfile, signOut } from \"firebase/auth\";\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, doc, setDoc, getDoc } from \"firebase/firestore\";\n\n// Configuração do Firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCG5Ipy3n97_Q0wuW3OIpRlFWKRorRh8Wg\",\n  authDomain: \"n3desweb.firebaseapp.com\",\n  projectId: \"n3desweb\",\n  storageBucket: \"n3desweb.appspot.com\",\n  messagingSenderId: \"506352280001\",\n  appId: \"1:506352280001:web:085c2d8997a3e2f19b4f40\",\n  measurementId: \"G-K4TTM7E95W\"\n};\n\n// Inicializar Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth();\nconst db = getFirestore();\n\n// Login com Google\nexport const signInWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    // Verificar se o usuário já está no Firestore\n    const userDoc = await getDoc(doc(db, \"users\", user.uid));\n    if (!userDoc.exists()) {\n      // Criar o documento para o usuário no Firestore\n      await setDoc(doc(db, \"users\", user.uid), {\n        name: user.displayName,\n        email: user.email,\n        isAdmin: false // Por padrão, não é admin\n      });\n    }\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com Google:\", error);\n    throw new Error(\"Falha no login com Google. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com GitHub\nexport const signInWithGithub = async () => {\n  try {\n    const provider = new GithubAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    // Verificar se o usuário já está no Firestore\n    const userDoc = await getDoc(doc(db, \"users\", user.uid));\n    if (!userDoc.exists()) {\n      // Criar o documento para o usuário no Firestore\n      await setDoc(doc(db, \"users\", user.uid), {\n        name: user.displayName,\n        email: user.email,\n        isAdmin: false // Por padrão, não é admin\n      });\n    }\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com GitHub:\", error);\n    throw new Error(\"Falha no login com GitHub. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com e-mail e senha\nexport const loginWithEmail = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return userCredential.user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com e-mail:\", error);\n    throw new Error(\"Falha no login. Verifique suas credenciais e tente novamente.\");\n  }\n};\n\n// Cadastro com e-mail e senha\nexport const registerWithEmailAndPassword = async (name, email, password, isAdmin = false) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n\n    // Atualizar o perfil do usuário com o nome\n    await updateProfile(user, {\n      displayName: name\n    });\n\n    // Salvar no Firestore\n    await setDoc(doc(db, \"users\", user.uid), {\n      name,\n      email,\n      isAdmin // Define se o usuário é admin ou não\n    });\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao cadastrar usuário:\", error);\n    throw new Error(\"Falha no cadastro. Tente novamente mais tarde.\");\n  }\n};\n\n// Buscar dados do usuário\nexport const getUserData = async uid => {\n  try {\n    const userDoc = await getDoc(doc(db, \"users\", uid));\n    return userDoc.exists() ? userDoc.data() : null;\n  } catch (error) {\n    console.error(\"Erro ao buscar dados do usuário:\", error);\n    throw new Error(\"Não foi possível carregar os dados do usuário.\");\n  }\n};\n\n// Logout\nexport const logout = async () => {\n  try {\n    return signOut(auth);\n  } catch (error) {\n    console.error(\"Erro ao fazer logout:\", error);\n    throw new Error(\"Falha no logout. Tente novamente mais tarde.\");\n  }\n};","map":{"version":3,"names":["getAuth","signInWithPopup","GoogleAuthProvider","GithubAuthProvider","signInWithEmailAndPassword","createUserWithEmailAndPassword","updateProfile","signOut","initializeApp","getFirestore","doc","setDoc","getDoc","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","signInWithGoogle","provider","result","user","userDoc","uid","exists","name","displayName","email","isAdmin","error","console","Error","signInWithGithub","loginWithEmail","password","userCredential","registerWithEmailAndPassword","getUserData","data","logout"],"sources":["C:/N3_DESWEB/LoginDashboardProject/src/utils/auth.js"],"sourcesContent":["import {\n  getAuth,\n  signInWithPopup,\n  GoogleAuthProvider,\n  GithubAuthProvider,\n  signInWithEmailAndPassword,\n  createUserWithEmailAndPassword,\n  updateProfile,\n  signOut,\n} from \"firebase/auth\";\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, doc, setDoc, getDoc } from \"firebase/firestore\";\n\n// Configuração do Firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCG5Ipy3n97_Q0wuW3OIpRlFWKRorRh8Wg\",\n  authDomain: \"n3desweb.firebaseapp.com\",\n  projectId: \"n3desweb\",\n  storageBucket: \"n3desweb.appspot.com\",\n  messagingSenderId: \"506352280001\",\n  appId: \"1:506352280001:web:085c2d8997a3e2f19b4f40\",\n  measurementId: \"G-K4TTM7E95W\",\n};\n\n// Inicializar Firebase\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth();\nconst db = getFirestore();\n\n// Login com Google\nexport const signInWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    // Verificar se o usuário já está no Firestore\n    const userDoc = await getDoc(doc(db, \"users\", user.uid));\n    if (!userDoc.exists()) {\n      // Criar o documento para o usuário no Firestore\n      await setDoc(doc(db, \"users\", user.uid), {\n        name: user.displayName,\n        email: user.email,\n        isAdmin: false, // Por padrão, não é admin\n      });\n    }\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com Google:\", error);\n    throw new Error(\"Falha no login com Google. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com GitHub\nexport const signInWithGithub = async () => {\n  try {\n    const provider = new GithubAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    // Verificar se o usuário já está no Firestore\n    const userDoc = await getDoc(doc(db, \"users\", user.uid));\n    if (!userDoc.exists()) {\n      // Criar o documento para o usuário no Firestore\n      await setDoc(doc(db, \"users\", user.uid), {\n        name: user.displayName,\n        email: user.email,\n        isAdmin: false, // Por padrão, não é admin\n      });\n    }\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com GitHub:\", error);\n    throw new Error(\"Falha no login com GitHub. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com e-mail e senha\nexport const loginWithEmail = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    return userCredential.user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com e-mail:\", error);\n    throw new Error(\"Falha no login. Verifique suas credenciais e tente novamente.\");\n  }\n};\n\n// Cadastro com e-mail e senha\nexport const registerWithEmailAndPassword = async (name, email, password, isAdmin = false) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n\n    // Atualizar o perfil do usuário com o nome\n    await updateProfile(user, { displayName: name });\n\n    // Salvar no Firestore\n    await setDoc(doc(db, \"users\", user.uid), {\n      name,\n      email,\n      isAdmin, // Define se o usuário é admin ou não\n    });\n\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao cadastrar usuário:\", error);\n    throw new Error(\"Falha no cadastro. Tente novamente mais tarde.\");\n  }\n};\n\n// Buscar dados do usuário\nexport const getUserData = async (uid) => {\n  try {\n    const userDoc = await getDoc(doc(db, \"users\", uid));\n    return userDoc.exists() ? userDoc.data() : null;\n  } catch (error) {\n    console.error(\"Erro ao buscar dados do usuário:\", error);\n    throw new Error(\"Não foi possível carregar os dados do usuário.\");\n  }\n};\n\n// Logout\nexport const logout = async () => {\n  try {\n    return signOut(auth);\n  } catch (error) {\n    console.error(\"Erro ao fazer logout:\", error);\n    throw new Error(\"Falha no logout. Tente novamente mais tarde.\");\n  }\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}