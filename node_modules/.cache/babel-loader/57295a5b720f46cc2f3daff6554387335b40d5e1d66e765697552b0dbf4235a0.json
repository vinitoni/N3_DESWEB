{"ast":null,"code":"import { getAuth, signInWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, GithubAuthProvider, createUserWithEmailAndPassword, updateProfile, signOut } from \"firebase/auth\";\nimport { initializeApp } from \"firebase/app\";\nimport { getFirestore, doc, getDoc, setDoc, enableIndexedDbPersistence } from \"firebase/firestore\";\n\n// Configuração do Firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCG5Ipy3n97_Q0wuW3OIpRlFWKRorRh8Wg\",\n  authDomain: \"n3desweb.firebaseapp.com\",\n  projectId: \"n3desweb\",\n  storageBucket: \"n3desweb.appspot.com\",\n  messagingSenderId: \"506352280001\",\n  appId: \"1:506352280001:web:085c2d8997a3e2f19b4f40\",\n  measurementId: \"G-K4TTM7E95W\"\n};\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Habilitar persistência offline para Firestore\nenableIndexedDbPersistence(db).catch(err => {\n  if (err.code === \"failed-precondition\") {\n    console.error(\"Persistência offline falhou: múltiplas abas abertas.\");\n  } else if (err.code === \"unimplemented\") {\n    console.error(\"Persistência offline não é suportada no navegador.\");\n  }\n});\n\n// Login com Google\nexport const signInWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n    const userDocRef = doc(db, \"users\", user.uid);\n    const userDoc = await getDoc(userDocRef);\n    if (!userDoc.exists()) {\n      await setDoc(userDocRef, {\n        name: user.displayName || \"Usuário\",\n        email: user.email,\n        isAdmin: false,\n        createdAt: new Date()\n      });\n    }\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com Google:\", error.message);\n    throw new Error(\"Falha no login com Google. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com GitHub\nexport const signInWithGithub = async () => {\n  try {\n    const provider = new GithubAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n    const userDocRef = doc(db, \"users\", user.uid);\n    const userDoc = await getDoc(userDocRef);\n    if (!userDoc.exists()) {\n      await setDoc(userDocRef, {\n        name: user.displayName || \"Usuário\",\n        email: user.email,\n        isAdmin: false,\n        createdAt: new Date()\n      });\n    }\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com GitHub:\", error.message);\n    throw new Error(\"Falha no login com GitHub. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com E-mail/Senha\nexport const loginWithEmail = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    const userDocRef = doc(db, \"users\", user.uid);\n    const userDoc = await getDoc(userDocRef);\n    if (!userDoc.exists()) {\n      throw new Error(\"Usuário não encontrado no banco de dados.\");\n    }\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com e-mail:\", error.message);\n    throw new Error(\"Falha no login. Verifique suas credenciais e tente novamente.\");\n  }\n};\n\n// Cadastro com E-mail/Senha\nexport const registerWithEmailAndPassword = async (name, email, password, isAdmin = false) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    await updateProfile(user, {\n      displayName: name\n    });\n    await setDoc(doc(db, \"users\", user.uid), {\n      name,\n      email,\n      isAdmin,\n      createdAt: new Date()\n    });\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao cadastrar usuário:\", error.message);\n    throw new Error(\"Falha no cadastro. Tente novamente mais tarde.\");\n  }\n};\n\n// Buscar Dados do Usuário\nexport const getUserData = async uid => {\n  try {\n    const userDocRef = doc(db, \"users\", uid);\n    const userDoc = await getDoc(userDocRef);\n    return userDoc.exists() ? userDoc.data() : null;\n  } catch (error) {\n    console.error(\"Erro ao buscar dados do usuário:\", error.message);\n    throw new Error(\"Não foi possível carregar os dados do usuário.\");\n  }\n};\n\n// Logout\nexport const logout = async () => {\n  try {\n    return signOut(auth);\n  } catch (error) {\n    console.error(\"Erro ao fazer logout:\", error.message);\n    throw new Error(\"Falha no logout. Tente novamente mais tarde.\");\n  }\n};\nconsole.log(\"Usuário autenticado:\", user);","map":{"version":3,"names":["getAuth","signInWithEmailAndPassword","GoogleAuthProvider","signInWithPopup","GithubAuthProvider","createUserWithEmailAndPassword","updateProfile","signOut","initializeApp","getFirestore","doc","getDoc","setDoc","enableIndexedDbPersistence","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","catch","err","code","console","error","signInWithGoogle","provider","result","user","userDocRef","uid","userDoc","exists","name","displayName","email","isAdmin","createdAt","Date","message","Error","signInWithGithub","loginWithEmail","password","userCredential","registerWithEmailAndPassword","getUserData","data","logout","log"],"sources":["C:/N3_DESWEB/LoginDashboardProject/src/utils/auth.js"],"sourcesContent":["import {\n  getAuth,\n  signInWithEmailAndPassword,\n  GoogleAuthProvider,\n  signInWithPopup,\n  GithubAuthProvider,\n  createUserWithEmailAndPassword,\n  updateProfile,\n  signOut,\n} from \"firebase/auth\";\nimport { initializeApp } from \"firebase/app\";\nimport {\n  getFirestore,\n  doc,\n  getDoc,\n  setDoc,\n  enableIndexedDbPersistence,\n} from \"firebase/firestore\";\n\n// Configuração do Firebase\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCG5Ipy3n97_Q0wuW3OIpRlFWKRorRh8Wg\",\n  authDomain: \"n3desweb.firebaseapp.com\",\n  projectId: \"n3desweb\",\n  storageBucket: \"n3desweb.appspot.com\",\n  messagingSenderId: \"506352280001\",\n  appId: \"1:506352280001:web:085c2d8997a3e2f19b4f40\",\n  measurementId: \"G-K4TTM7E95W\",\n};\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\n\n// Habilitar persistência offline para Firestore\nenableIndexedDbPersistence(db).catch((err) => {\n  if (err.code === \"failed-precondition\") {\n    console.error(\"Persistência offline falhou: múltiplas abas abertas.\");\n  } else if (err.code === \"unimplemented\") {\n    console.error(\"Persistência offline não é suportada no navegador.\");\n  }\n});\n\n// Login com Google\nexport const signInWithGoogle = async () => {\n  try {\n    const provider = new GoogleAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    const userDocRef = doc(db, \"users\", user.uid);\n    const userDoc = await getDoc(userDocRef);\n\n    if (!userDoc.exists()) {\n      await setDoc(userDocRef, {\n        name: user.displayName || \"Usuário\",\n        email: user.email,\n        isAdmin: false,\n        createdAt: new Date(),\n      });\n    }\n\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com Google:\", error.message);\n    throw new Error(\"Falha no login com Google. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com GitHub\nexport const signInWithGithub = async () => {\n  try {\n    const provider = new GithubAuthProvider();\n    const result = await signInWithPopup(auth, provider);\n    const user = result.user;\n\n    const userDocRef = doc(db, \"users\", user.uid);\n    const userDoc = await getDoc(userDocRef);\n\n    if (!userDoc.exists()) {\n      await setDoc(userDocRef, {\n        name: user.displayName || \"Usuário\",\n        email: user.email,\n        isAdmin: false,\n        createdAt: new Date(),\n      });\n    }\n\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com GitHub:\", error.message);\n    throw new Error(\"Falha no login com GitHub. Tente novamente mais tarde.\");\n  }\n};\n\n// Login com E-mail/Senha\nexport const loginWithEmail = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n\n    const userDocRef = doc(db, \"users\", user.uid);\n    const userDoc = await getDoc(userDocRef);\n\n    if (!userDoc.exists()) {\n      throw new Error(\"Usuário não encontrado no banco de dados.\");\n    }\n\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao fazer login com e-mail:\", error.message);\n    throw new Error(\"Falha no login. Verifique suas credenciais e tente novamente.\");\n  }\n};\n\n// Cadastro com E-mail/Senha\nexport const registerWithEmailAndPassword = async (name, email, password, isAdmin = false) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n\n    await updateProfile(user, { displayName: name });\n\n    await setDoc(doc(db, \"users\", user.uid), {\n      name,\n      email,\n      isAdmin,\n      createdAt: new Date(),\n    });\n\n    return user;\n  } catch (error) {\n    console.error(\"Erro ao cadastrar usuário:\", error.message);\n    throw new Error(\"Falha no cadastro. Tente novamente mais tarde.\");\n  }\n};\n\n// Buscar Dados do Usuário\nexport const getUserData = async (uid) => {\n  try {\n    const userDocRef = doc(db, \"users\", uid);\n    const userDoc = await getDoc(userDocRef);\n    return userDoc.exists() ? userDoc.data() : null;\n  } catch (error) {\n    console.error(\"Erro ao buscar dados do usuário:\", error.message);\n    throw new Error(\"Não foi possível carregar os dados do usuário.\");\n  }\n};\n\n// Logout\nexport const logout = async () => {\n  try {\n    return signOut(auth);\n  } catch (error) {\n    console.error(\"Erro ao fazer logout:\", error.message);\n    throw new Error(\"Falha no logout. Tente novamente mais tarde.\");\n  }\n};\n\n\nconsole.log(\"Usuário autenticado:\", user);\n"],"mappings":"AAAA,SACEA,OAAO,EACPC,0BAA0B,EAC1BC,kBAAkB,EAClBC,eAAe,EACfC,kBAAkB,EAClBC,8BAA8B,EAC9BC,aAAa,EACbC,OAAO,QACF,eAAe;AACtB,SAASC,aAAa,QAAQ,cAAc;AAC5C,SACEC,YAAY,EACZC,GAAG,EACHC,MAAM,EACNC,MAAM,EACNC,0BAA0B,QACrB,oBAAoB;;AAE3B;AACA,MAAMC,cAAc,GAAG;EACrBC,MAAM,EAAE,yCAAyC;EACjDC,UAAU,EAAE,0BAA0B;EACtCC,SAAS,EAAE,UAAU;EACrBC,aAAa,EAAE,sBAAsB;EACrCC,iBAAiB,EAAE,cAAc;EACjCC,KAAK,EAAE,2CAA2C;EAClDC,aAAa,EAAE;AACjB,CAAC;AAED,MAAMC,GAAG,GAAGd,aAAa,CAACM,cAAc,CAAC;AACzC,MAAMS,IAAI,GAAGvB,OAAO,CAACsB,GAAG,CAAC;AACzB,MAAME,EAAE,GAAGf,YAAY,CAACa,GAAG,CAAC;;AAE5B;AACAT,0BAA0B,CAACW,EAAE,CAAC,CAACC,KAAK,CAAEC,GAAG,IAAK;EAC5C,IAAIA,GAAG,CAACC,IAAI,KAAK,qBAAqB,EAAE;IACtCC,OAAO,CAACC,KAAK,CAAC,sDAAsD,CAAC;EACvE,CAAC,MAAM,IAAIH,GAAG,CAACC,IAAI,KAAK,eAAe,EAAE;IACvCC,OAAO,CAACC,KAAK,CAAC,oDAAoD,CAAC;EACrE;AACF,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EAC1C,IAAI;IACF,MAAMC,QAAQ,GAAG,IAAI7B,kBAAkB,CAAC,CAAC;IACzC,MAAM8B,MAAM,GAAG,MAAM7B,eAAe,CAACoB,IAAI,EAAEQ,QAAQ,CAAC;IACpD,MAAME,IAAI,GAAGD,MAAM,CAACC,IAAI;IAExB,MAAMC,UAAU,GAAGxB,GAAG,CAACc,EAAE,EAAE,OAAO,EAAES,IAAI,CAACE,GAAG,CAAC;IAC7C,MAAMC,OAAO,GAAG,MAAMzB,MAAM,CAACuB,UAAU,CAAC;IAExC,IAAI,CAACE,OAAO,CAACC,MAAM,CAAC,CAAC,EAAE;MACrB,MAAMzB,MAAM,CAACsB,UAAU,EAAE;QACvBI,IAAI,EAAEL,IAAI,CAACM,WAAW,IAAI,SAAS;QACnCC,KAAK,EAAEP,IAAI,CAACO,KAAK;QACjBC,OAAO,EAAE,KAAK;QACdC,SAAS,EAAE,IAAIC,IAAI,CAAC;MACtB,CAAC,CAAC;IACJ;IAEA,OAAOV,IAAI;EACb,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAACe,OAAO,CAAC;IAC/D,MAAM,IAAIC,KAAK,CAAC,wDAAwD,CAAC;EAC3E;AACF,CAAC;;AAED;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EAC1C,IAAI;IACF,MAAMf,QAAQ,GAAG,IAAI3B,kBAAkB,CAAC,CAAC;IACzC,MAAM4B,MAAM,GAAG,MAAM7B,eAAe,CAACoB,IAAI,EAAEQ,QAAQ,CAAC;IACpD,MAAME,IAAI,GAAGD,MAAM,CAACC,IAAI;IAExB,MAAMC,UAAU,GAAGxB,GAAG,CAACc,EAAE,EAAE,OAAO,EAAES,IAAI,CAACE,GAAG,CAAC;IAC7C,MAAMC,OAAO,GAAG,MAAMzB,MAAM,CAACuB,UAAU,CAAC;IAExC,IAAI,CAACE,OAAO,CAACC,MAAM,CAAC,CAAC,EAAE;MACrB,MAAMzB,MAAM,CAACsB,UAAU,EAAE;QACvBI,IAAI,EAAEL,IAAI,CAACM,WAAW,IAAI,SAAS;QACnCC,KAAK,EAAEP,IAAI,CAACO,KAAK;QACjBC,OAAO,EAAE,KAAK;QACdC,SAAS,EAAE,IAAIC,IAAI,CAAC;MACtB,CAAC,CAAC;IACJ;IAEA,OAAOV,IAAI;EACb,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAACe,OAAO,CAAC;IAC/D,MAAM,IAAIC,KAAK,CAAC,wDAAwD,CAAC;EAC3E;AACF,CAAC;;AAED;AACA,OAAO,MAAME,cAAc,GAAG,MAAAA,CAAOP,KAAK,EAAEQ,QAAQ,KAAK;EACvD,IAAI;IACF,MAAMC,cAAc,GAAG,MAAMhD,0BAA0B,CAACsB,IAAI,EAAEiB,KAAK,EAAEQ,QAAQ,CAAC;IAC9E,MAAMf,IAAI,GAAGgB,cAAc,CAAChB,IAAI;IAEhC,MAAMC,UAAU,GAAGxB,GAAG,CAACc,EAAE,EAAE,OAAO,EAAES,IAAI,CAACE,GAAG,CAAC;IAC7C,MAAMC,OAAO,GAAG,MAAMzB,MAAM,CAACuB,UAAU,CAAC;IAExC,IAAI,CAACE,OAAO,CAACC,MAAM,CAAC,CAAC,EAAE;MACrB,MAAM,IAAIQ,KAAK,CAAC,2CAA2C,CAAC;IAC9D;IAEA,OAAOZ,IAAI;EACb,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAEA,KAAK,CAACe,OAAO,CAAC;IAC/D,MAAM,IAAIC,KAAK,CAAC,+DAA+D,CAAC;EAClF;AACF,CAAC;;AAED;AACA,OAAO,MAAMK,4BAA4B,GAAG,MAAAA,CAAOZ,IAAI,EAAEE,KAAK,EAAEQ,QAAQ,EAAEP,OAAO,GAAG,KAAK,KAAK;EAC5F,IAAI;IACF,MAAMQ,cAAc,GAAG,MAAM5C,8BAA8B,CAACkB,IAAI,EAAEiB,KAAK,EAAEQ,QAAQ,CAAC;IAClF,MAAMf,IAAI,GAAGgB,cAAc,CAAChB,IAAI;IAEhC,MAAM3B,aAAa,CAAC2B,IAAI,EAAE;MAAEM,WAAW,EAAED;IAAK,CAAC,CAAC;IAEhD,MAAM1B,MAAM,CAACF,GAAG,CAACc,EAAE,EAAE,OAAO,EAAES,IAAI,CAACE,GAAG,CAAC,EAAE;MACvCG,IAAI;MACJE,KAAK;MACLC,OAAO;MACPC,SAAS,EAAE,IAAIC,IAAI,CAAC;IACtB,CAAC,CAAC;IAEF,OAAOV,IAAI;EACb,CAAC,CAAC,OAAOJ,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAACe,OAAO,CAAC;IAC1D,MAAM,IAAIC,KAAK,CAAC,gDAAgD,CAAC;EACnE;AACF,CAAC;;AAED;AACA,OAAO,MAAMM,WAAW,GAAG,MAAOhB,GAAG,IAAK;EACxC,IAAI;IACF,MAAMD,UAAU,GAAGxB,GAAG,CAACc,EAAE,EAAE,OAAO,EAAEW,GAAG,CAAC;IACxC,MAAMC,OAAO,GAAG,MAAMzB,MAAM,CAACuB,UAAU,CAAC;IACxC,OAAOE,OAAO,CAACC,MAAM,CAAC,CAAC,GAAGD,OAAO,CAACgB,IAAI,CAAC,CAAC,GAAG,IAAI;EACjD,CAAC,CAAC,OAAOvB,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEA,KAAK,CAACe,OAAO,CAAC;IAChE,MAAM,IAAIC,KAAK,CAAC,gDAAgD,CAAC;EACnE;AACF,CAAC;;AAED;AACA,OAAO,MAAMQ,MAAM,GAAG,MAAAA,CAAA,KAAY;EAChC,IAAI;IACF,OAAO9C,OAAO,CAACgB,IAAI,CAAC;EACtB,CAAC,CAAC,OAAOM,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACe,OAAO,CAAC;IACrD,MAAM,IAAIC,KAAK,CAAC,8CAA8C,CAAC;EACjE;AACF,CAAC;AAGDjB,OAAO,CAAC0B,GAAG,CAAC,sBAAsB,EAAErB,IAAI,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}